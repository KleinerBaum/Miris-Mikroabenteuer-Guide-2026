# Changelog

- DE: Im Bereich "Mikroabenteuer des Tages üåø" bleibt standardm√§√üig nur Kopfzeile, Titel, Ort/Dauer/Distanz und Wetter sichtbar; der √ºbrige Inhalt ist per Details-Expander eingeklappt.
- EN: In the "Mikroabenteuer des Tages üåø" section, only headline, title, location/duration/distance, and weather remain visible by default; the remaining content is collapsed in a details expander.

## Unreleased

### Ge√§ndert / Changed
- DE: Neue UI-Aktion ‚ÄûPlan melden / Report plan‚Äú erg√§nzt. Nutzer:innen k√∂nnen jeden generierten Tagesplan mit einem Grund melden; gespeichert werden ausschlie√ülich minimale Metadaten (`timestamp_utc`, `plan_hash`, `reason`) ohne PII in einer lokalen JSONL-Datei.
- EN: Added a new UI action ‚ÄúPlan melden / Report plan‚Äù. Users can report each generated daily plan with a reason; only minimal metadata (`timestamp_utc`, `plan_hash`, `reason`) is persisted without PII in a local JSONL file.
- DE: OpenAI-Aufrufe f√ºr Plan- und Event-Generierung sind jetzt robust gekapselt: nur 429/5xx/tempor√§re Fehler werden mit exponentiellem Backoff erneut versucht; bei anhaltendem API-Fehler liefert die App kuratierte sichere Fallback-Ergebnisse statt abzust√ºrzen.
- EN: OpenAI calls for plan and event generation are now wrapped robustly: only 429/5xx/transient failures are retried with exponential backoff; on persistent API failure the app returns curated safe fallback results instead of crashing.
- DE: Neue Konfigurationskonstanten `MAX_INPUT_CHARS`, `MAX_OUTPUT_TOKENS`, `TIMEOUT_S` und `MAX_REQUESTS_PER_SESSION` erg√§nzt und in UI + OpenAI-Backend erzwungen (Eingabek√ºrzung, Token-Limit, Timeout-Weitergabe, Session-Anfragebudget).
- EN: Added new configuration constants `MAX_INPUT_CHARS`, `MAX_OUTPUT_TOKENS`, `TIMEOUT_S`, and `MAX_REQUESTS_PER_SESSION` and enforced them in both UI and OpenAI backend (input truncation, token cap, timeout propagation, session request budget).
- DE: Neue Utility `redact_pii(text)` erg√§nzt und auf alle ausgehenden OpenAI-Texte angewendet (Moderation + Responses in Plan- und Event-Generierung); E-Mail, Telefon, adress√§hnliche Daten und Namensmuster werden vor dem Senden maskiert, Logs bleiben PII-frei.
- EN: Added a new `redact_pii(text)` utility and applied it to all outbound OpenAI text (moderation + responses in plan and event generation); email, phone, address-like data, and name patterns are masked before sending, and logs stay PII-free.
- DE: Eingaben in Sidebar und Wetter-&-Events-Form wurden auf validierte Auswahlfelder umgestellt (Altersband, Dauer, Ortspr√§ferenz, Ziele, Rahmenbedingungen). Optionaler Freitext ist jetzt auf 80 Zeichen begrenzt und wird sanitisiert.
- EN: Inputs in the sidebar and weather/events form now use validated selection controls (age band, duration, location preference, goals, constraints). Optional free text is now capped at 80 characters and sanitized.
- DE: Entfernte UI-Texte: Die √úberschrift "Plan (kurz & klar)" hei√üt jetzt "Plan"; die Hinweise "Lokale Vorschl√§ge mit Wetter-Check und Live-Quellen.", "Diese Filter sind global und wirken auch auf die Abenteuer-Suche." sowie "Filter gelten global f√ºr Abenteuer und Veranstaltungen." wurden entfernt.
- EN: Removed UI text: the heading "Plan (kurz & klar)" is now "Plan"; the hints "Lokale Vorschl√§ge mit Wetter-Check und Live-Quellen.", "Diese Filter sind global und wirken auch auf die Abenteuer-Suche.", and "Filter gelten global f√ºr Abenteuer und Veranstaltungen." were removed.
- DE: Neue regelbasierte Sicherheitsvalidierung f√ºr `ActivityPlan`: Unsichere Inhalte (u. a. Kleinteile bei <3 Jahren, scharfe Werkzeuge, Feuer/Hitze, giftige Chemikalien) werden hart geblockt; stattdessen wird automatisch ein sicheres Alternativprogramm gerendert.
- EN: Added a new rule-based safety validator for `ActivityPlan`: unsafe content (including small parts for <3 years, sharp tools, fire/heat, and toxic chemicals) is hard-blocked and automatically replaced with a safe fallback plan.
- DE: Strukturierte Pydantic-Modelle `ActivityRequest` und `ActivityPlan` erg√§nzt; die Generierung nutzt jetzt schema-validierte Structured Outputs und die UI rendert den Tagesplan ausschlie√ülich aus `ActivityPlan`-Objekten.
- EN: Added structured Pydantic models `ActivityRequest` and `ActivityPlan`; generation now uses schema-validated structured outputs and the UI renders the daily plan exclusively from `ActivityPlan` objects.
- DE: Bei fehlgeschlagener KI-Planerstellung zeigt die UI eine freundliche zweisprachige Fehlermeldung und f√§llt auf einen sicheren strukturierten Fallback-Plan zur√ºck.
- EN: If AI plan generation fails, the UI now shows a friendly bilingual error message and falls back to a safe structured fallback plan.
- DE: In der Tagesansicht wurde die Zwischen√ºberschrift "Motivations‚ÄëOne‚ÄëLiner" entfernt; der Motivationssatz bleibt direkt unter den Basisinfos sichtbar.
- EN: In the daily view, the "Motivations‚ÄëOne‚ÄëLiner" subheading was removed; the motivation sentence now appears directly below the basic info.
- DE: In der Sidebar gibt es jetzt ein personalisierbares Familienprofil (Kindname, Elternname(n), Kindesalter). Die Angaben ersetzen Platzhalter wie ‚ÄûCarla‚Äú, ‚ÄûMiri/Miriam‚Äú und ‚Äû2,5‚Äú in Abenteuertexten, Titeln und Exporten zur Laufzeit.
- EN: The sidebar now includes a customizable family profile (child name, parent name(s), child age). These values replace placeholders like ‚ÄúCarla‚Äù, ‚ÄúMiri/Miriam‚Äù, and ‚Äú2.5‚Äù in adventure texts, titles, and exports at runtime.
- DE: `src/mikroabenteuer/config.py` aktiviert OpenAI/LLM nun standardm√§√üig (`ENABLE_LLM` default `true`); Abschalten bleibt per `ENABLE_LLM=0` m√∂glich.
- EN: `src/mikroabenteuer/config.py` now enables OpenAI/LLM by default (`ENABLE_LLM` default `true`); disabling remains possible via `ENABLE_LLM=0`.
- DE: `app.py` verwendet nun ein einheitliches Mapping zwischen `ActivitySearchCriteria` und UI-Feldern; Sidebar und Formular arbeiten als getrennte UI-Adapter auf einem einzigen fachlichen Zustand (`criteria`) ohne direkte Cross-Writes zwischen `sidebar_*` und `form_*`.
- EN: `app.py` now uses a unified mapping between `ActivitySearchCriteria` and UI fields; sidebar and form operate as separate UI adapters over one business state (`criteria`) without direct cross-writes between `sidebar_*` and `form_*`.
- DE: Globale Synchronisationspfade im Submit-Flow wurden entfernt/gekapselt; Rendering initialisiert Widget-Keys nur einmal, Updates laufen konsistent von UI nach `criteria`.
- EN: Global synchronization paths in the submit flow were removed/encapsulated; rendering initializes widget keys only once, and updates now flow consistently from UI to `criteria`.
- DE: Widget-Synchronisierung f√ºr Sidebar und Formular abgesichert: bereits gebundene Widget-Keys werden nicht mehr blind √ºberschrieben; √Ñnderungen flie√üen √ºber `on_change`-Callbacks in den zentralen `criteria`-State und werden nach Submit kontrolliert per Re-Run verteilt.
- EN: Hardened widget synchronization for sidebar and form: already-bound widget keys are no longer overwritten blindly; changes flow back via `on_change` callbacks into central `criteria` state and are propagated after submit via a controlled rerun.
- DE: Sidebar-Filter und Formular ‚ÄûWetter & Events‚Äú teilen jetzt einen gemeinsamen `ActivitySearchCriteria`-State in `st.session_state["criteria"]`; beide Ansichten sind synchronisiert und nutzen identische Suchparameter.
- EN: Sidebar filters and the ‚ÄúWeather & Events‚Äù form now share one `ActivitySearchCriteria` state in `st.session_state["criteria"]`; both views are synchronized and use identical search parameters.
- DE: Die E-Mail-Vorschau im Export rendert jetzt die Mail direkt in der Oberfl√§che; der HTML-Quelltext ist weiterhin optional √ºber "HTML-Code anzeigen" verf√ºgbar.
- EN: The email preview in the export section now renders the email directly in the UI; the HTML source remains optionally available via "Show HTML source".
- DE: OpenAI-Strict-Output kompatibel gemacht: `source_urls` und `sources` in `src/mikroabenteuer/models.py` verwenden jetzt validierte `str`-URLs statt `AnyUrl`, damit das JSON-Schema kein nicht unterst√ºtztes `format: "uri"` mehr enth√§lt.
- EN: Made OpenAI strict outputs compatible: `source_urls` and `sources` in `src/mikroabenteuer/models.py` now use validated `str` URLs instead of `AnyUrl`, so the JSON schema no longer contains unsupported `format: "uri"`.
- DE: Contract-Test erg√§nzt, der sicherstellt, dass das generierte Schema f√ºr `ActivitySuggestionResult` keinen `uri`-Formatwert enth√§lt.
- EN: Added a contract test to ensure the generated `ActivitySuggestionResult` schema does not contain the `uri` format value.
- DE: `requirements.txt` enth√§lt jetzt explizit `openai>=1.0`, damit das OpenAI-SDK reproduzierbar im Ziel-Environment installiert wird.
- EN: `requirements.txt` now explicitly includes `openai>=1.0` so the OpenAI SDK is reproducibly installed in the target environment.
- DE: `src/mikroabenteuer/openai_activity_service.py` f√§ngt `ImportError` beim OpenAI-Import nun explizit ab und gibt eine klare zweisprachige Installationsanleitung aus.
- EN: `src/mikroabenteuer/openai_activity_service.py` now explicitly catches `ImportError` for the OpenAI import and returns a clear bilingual installation hint.
- DE: `requirements.txt` pinnt `pydantic` jetzt reproduzierbar auf `>=2.6,<3`, damit Deployments zuverl√§ssig Pydantic v2 verwenden.
- EN: `requirements.txt` now reproducibly pins `pydantic` to `>=2.6,<3` so deployments reliably use Pydantic v2.
- DE: Paketlayout final auf einen kanonischen Root festgezogen: `src/__init__.py` erg√§nzt, sodass `src.mikroabenteuer.*` als eindeutiger Importpfad fungiert (statt impliziter Namespace-Aufl√∂sung).
- EN: Finalized the package layout to one canonical root: added `src/__init__.py` so `src.mikroabenteuer.*` acts as the unambiguous import path (instead of implicit namespace resolution).
- DE: Neuer Strukturtest (`tests/test_src_package_structure.py`) pr√ºft automatisiert, dass alle relativen Importe in `src/mikroabenteuer/` auf existente Module zeigen und keine Legacy-Root-Importe nutzen.
- EN: Added a structural test (`tests/test_src_package_structure.py`) to automatically verify that all relative imports in `src/mikroabenteuer/` resolve to existing modules and avoid legacy root imports.
- DE: Variante A (`src` als einziger Import-Root) wurde technisch vervollst√§ndigt: `src/mikroabenteuer/retry.py` und `src/mikroabenteuer/openai_settings.py` erg√§nzt, plus paketlokaler Retry-Import im Orchestrator korrigiert.
- EN: Completed variant A (`src` as the single import root): added `src/mikroabenteuer/retry.py` and `src/mikroabenteuer/openai_settings.py`, plus fixed the orchestrator to use package-local retry import.
- DE: Import-Konflikt im Wetter-&-Events-Flow behoben: `openai_activity_service` und `activity_orchestrator` nutzen jetzt Relative-Imports (`from .models ...`) auf das `src`-Paket, wodurch Kollisionen mit dem Root-Paket `mikroabenteuer` vermieden werden.
- EN: Fixed import conflict in the weather/events flow: `openai_activity_service` and `activity_orchestrator` now use relative imports (`from .models ...`) targeting the `src` package, avoiding collisions with the root `mikroabenteuer` package.
- DE: Such-Contract vervollst√§ndigt (`max_suggestions`, `to_llm_params`, `ActivitySuggestionResult`, `SearchStrategy`, `WeatherSummary`) und durch neue Contract-Tests abgesichert.
- EN: Completed the search contract (`max_suggestions`, `to_llm_params`, `ActivitySuggestionResult`, `SearchStrategy`, `WeatherSummary`) and covered it with new contract tests.
- DE: `to_llm_params()` erg√§nzt jetzt `available_minutes`; `ActivitySuggestion` und `weather.WeatherSummary` wurden auf den vom Orchestrator erwarteten Felderumfang erweitert (inkl. kompatibler Alias-Properties f√ºr bestehende Aufrufer).
- EN: `to_llm_params()` now includes `available_minutes`; `ActivitySuggestion` and `weather.WeatherSummary` were extended to the full field contract expected by the orchestrator (including compatibility alias properties for existing callers).
- DE: Suchvertrag auf einen kanonischen Pfad konsolidiert (`src/mikroabenteuer/models.py`): Aufrufer in App, Recommender und Export nutzen jetzt einheitlich `plz`, `date`, `time_window`, `topics`; Zeitfenster werden konsistent validiert und serialisiert.
- EN: Consolidated the search contract to one canonical path (`src/mikroabenteuer/models.py`): callers in app, recommender, and export now consistently use `plz`, `date`, `time_window`, and `topics`; time windows are validated and serialized consistently.
- DE: Neues ‚ÄûActivity Search (NEW)‚Äú-Schema in `mikroabenteuer/models.py` erg√§nzt (inkl. `TimeWindow`, `ActivitySearchCriteria`, `WeatherReport`, `SearchStrategy`, `ActivitySuggestion`, `ActivityPlan`) mit strikter Validierung (`extra="forbid"`).
- EN: Added a new ‚ÄúActivity Search (NEW)‚Äù schema section in `mikroabenteuer/models.py` (including `TimeWindow`, `ActivitySearchCriteria`, `WeatherReport`, `SearchStrategy`, `ActivitySuggestion`, `ActivityPlan`) with strict validation (`extra="forbid"`).
- DE: Die Landing-Page wurde auf die neuen Module unter `src/mikroabenteuer` umgestellt (Config, Seed, Wetter, Recommender, OpenAI-Planung) und konsistent integriert.
- EN: The landing page now uses the new modules under `src/mikroabenteuer` (config, seed, weather, recommender, OpenAI planning) in a consistent integration.
- DE: Export-Flow erweitert: Tagesplan kann jetzt direkt als JSON, Markdown und ICS heruntergeladen werden.
- EN: Export flow extended: the daily plan can now be downloaded directly as JSON, Markdown, and ICS.
- DE: Neuer optionaler Automation-Bereich zum manuellen Ausl√∂sen des Daily-Jobs (inkl. optionalem Gmail-/Google-Calendar-Versand bei konfigurierten Credentials).
- EN: Added an optional automation area to manually run the daily job (including optional Gmail/Google Calendar delivery when credentials are configured).
- DE: F√ºr KI-Textgenerierung wurden in der UI verst√§ndliche Fehlhinweise plus Retry mit exponentiellem Backoff erg√§nzt.
- EN: For AI text generation, the UI now provides clear error hints plus retry with exponential backoff.
- DE: Alle relevanten UI- und Mail-Texte wurden auf die exklusive Zielgruppe ‚ÄûMiri (Mutter) und Carla (Tochter)" angepasst.
- EN: All relevant UI and email texts were adjusted for the exclusive audience ‚ÄúMiri (mother) and Carla (daughter)‚Äù.
- DE: Die Landingpage wurde visuell entschlackt und neu strukturiert: kompakter Hero, klarer 3-Schritte-Einstieg, Fokus auf Filter/Karten und reduzierter Abschlussbereich.
- EN: The landing page was visually decluttered and restructured: compact hero, clear 3-step onboarding, focus on filters/cards, and a reduced closing section.
- DE: Kontraste im Export-Bereich wurden erh√∂ht; Download-Buttons und E-Mail-Vorschau sind nun auch ohne Hover eindeutig lesbar.
- EN: Increased contrast in the export area; download buttons and email preview are now clearly readable without hover.
- DE: Die Hero-CTA-Buttons wurden von Blau auf Dunkelgrau umgestellt; die Button-Schrift bleibt wei√ü f√ºr klare Lesbarkeit.
- EN: Hero CTA buttons were changed from blue to dark gray; button text remains white for clear readability.
- DE: Wetterabfrage ist jetzt standortkonfigurierbar √ºber `WEATHER_LAT` und `WEATHER_LON`; Standard ist Volksgarten (D√ºsseldorf) statt festem Stadtzentrum.
- EN: Weather lookup is now location-configurable via `WEATHER_LAT` and `WEATHER_LON`; default is Volksgarten (D√ºsseldorf) instead of a fixed city-center coordinate.
- DE: Bei mehreren passenden Abenteuern priorisiert die Auswahl nun Eintr√§ge mit Standort ‚ÄûVolksgarten‚Äú.
- EN: If multiple adventures match, selection now prioritizes entries whose location contains ‚ÄúVolksgarten‚Äù.
- DE: Google OAuth2 wurde auf Least-Privilege-Scopes f√ºr Kalender und Gmail erweitert (`calendar.events`, `calendar.readonly`, `gmail.send`) und zentral im neuen Auth-Modul geb√ºndelt.
- EN: Google OAuth2 was expanded to least-privilege scopes for calendar and Gmail (`calendar.events`, `calendar.readonly`, `gmail.send`) and centralized in a new auth module.
- DE: Neue Google-Integrationen f√ºr Kalender-Events und HTML-Mail-Versand inkl. API-Retry mit exponentiellem Backoff erg√§nzt.
- EN: Added new Google integrations for calendar events and HTML email sending, including API retry with exponential backoff.
- DE: Abenteuer-Detailansicht um Aktionen ‚ÄûIn Kalender eintragen / Add to calendar‚Äú und ‚ÄûPer Mail senden / Send by email‚Äú erweitert.
- EN: Adventure detail view now includes actions ‚ÄúIn Kalender eintragen / Add to calendar‚Äù and ‚ÄúPer Mail senden / Send by email‚Äù.
- DE: Die Startseite wurde zu einer conversion-orientierten, zweisprachigen Funnel-Landingpage ausgebaut (Hero, Problem/L√∂sung, Erkl√§rsektion, Filterkarten, Nutzenargumentation, 3-Schritte-Start, Lead-Element, Abschluss-CTA).
- EN: The homepage was expanded into a conversion-oriented bilingual funnel landing page (hero, problem/solution, explanation section, filter cards, impact arguments, 3-step start, lead element, closing CTA).
- DE: Neue Abenteuer-Kategorien mit kombinierten Filtern (Jahreszeit, Dauer, Alter, Stimmung) und Karten-CTAs "Details ansehen / View details" unterst√ºtzen die direkte Nutzerhandlung.
- EN: New adventure categories with combined filters (season, duration, age, mood) and card CTAs "Details ansehen / View details" support direct user action.
- DE: √úber dem Begr√º√üungsbild wird jetzt zentriert die Headline ‚ÄûKleine Abenteuer. Gro√üe Erinnerungen üéÇ‚Äú angezeigt, erg√§nzt um die englische Zeile ‚ÄûSmall adventures. Big memories.‚Äú.
- EN: A centered headline ‚ÄúKleine Abenteuer. Gro√üe Erinnerungen üéÇ‚Äù is now shown above the welcome image, complemented by the English line ‚ÄúSmall adventures. Big memories.‚Äù.
- DE: Die Sektion ‚ÄûAlle Mikroabenteuer‚Äú wurde in ‚ÄûAlternative Mikroabenteuer‚Äú umbenannt und die zus√§tzliche √úbersichtstabelle entfernt; die Abenteuer bleiben √ºber Drop-down-Elemente (`st.expander`) erreichbar.
- EN: Renamed the ‚ÄúAll Micro-Adventures‚Äù section to ‚ÄúAlternative Micro-Adventures‚Äù and removed the extra overview table; adventures remain accessible via drop-down expanders (`st.expander`).
- DE: Den gesamten im Header sichtbaren Begr√º√üungstext entfernt (Bild-Caption, Hero-Titel und Hero-Untertitel), sodass im oberen Seitenbereich nur noch das Bild angezeigt wird.
- EN: Removed all visible welcome text in the header (image caption, hero title, and hero subtitle), so only the image remains in the top section.
- DE: Das Begr√º√üungsbild im Hero-Bereich wird jetzt aus dem lokalen Asset `ChatGPT Image 14. Feb. 2026, 20_05_20.png` via `st.image` geladen, um Streamlit-`MediaFileHandler`-Fehler durch abgelaufene Media-IDs zu vermeiden.
- EN: The hero welcome image is now loaded from the local asset `ChatGPT Image 14. Feb. 2026, 20_05_20.png` via `st.image` to avoid Streamlit `MediaFileHandler` errors caused by expired media IDs.
- DE: Headline ‚Äûüåø Mikroabenteuer mit Carla / Kleine Abenteuer. Gro√üe Erinnerungen.‚Äú im Hero-Bereich zentriert und das Begr√º√üungsbild auf eine um 70% reduzierte Darstellung (30% Breite) umgestellt.
- EN: Centered the hero headline ‚Äúüåø Mikroabenteuer mit Carla / Kleine Abenteuer. Gro√üe Erinnerungen.‚Äù and reduced the welcome image display by 70% (30% width).
- DE: `mikroabenteuer/ui/__init__.py` erg√§nzt und Package-Imports auf relative Importe umgestellt, um sporadische `KeyError`-Importprobleme in Streamlit-Reloadern zu vermeiden.
- EN: Added `mikroabenteuer/ui/__init__.py` and switched package internals to relative imports to prevent intermittent `KeyError` import failures during Streamlit reloads.
- DE: UI-Farbpalette in `app.py` auf einen naturverbundenen Kanon (Dark Green, Mint, Terracotta, Marigold, Sky Blue, Lavender, Cream, Charcoal) umgestellt; Sidebar, Expander und Buttons folgen jetzt einer konsistenten visuellen Hierarchie.
- EN: Updated the UI color palette in `app.py` to a nature-inspired set (Dark Green, Mint, Terracotta, Marigold, Sky Blue, Lavender, Cream, Charcoal); sidebar, expanders, and buttons now follow a consistent visual hierarchy.
- DE: Neue UI-Sektion ‚ÄûWetter & Events‚Äú erg√§nzt, inkl. Resource-Factory (`@st.cache_resource`) f√ºr `OpenAIActivityService` + `ActivityOrchestrator`, validierter Kriterien-Erfassung und Ausgabe von Wetter, Hinweisen, Events sowie Quellen.
- EN: Added a new ‚ÄúWeather & Events‚Äù UI section including a resource factory (`@st.cache_resource`) for `OpenAIActivityService` + `ActivityOrchestrator`, validated criteria input, and rendering of weather, warnings, events, and sources.
- Wetterservice (`Open-Meteo`) f√ºr D√ºsseldorf inkl. typed API-Parsing und Retry-Backoff.
- Adventure Engine mit wetterbasierter Auswahl (Regen/Sonne/Wind/Kalt).
- Daily Scheduler (APScheduler) mit Cron 08:20 (Europe/Berlin).
- RFC-5545-konformer ICS-Builder mit escaped Feldern und UTC-Timestamps.
- Bilinguales HTML-Mail-Template mit Inline-CSS.
- Gmail Service f√ºr Versand von HTML-Mail + ICS Attachment via OAuth.
- Dockerfile und `docker-compose.yml` f√ºr Deployment.
- Unit-Tests f√ºr Adventure Engine, ICS-Builder und Mail-Template.

### Changed
- `app.py` startet Scheduler optional √ºber `ENABLE_DAILY_SCHEDULER=1`.
- `requirements.txt` um Scheduler-, Weather- und Google-API-Abh√§ngigkeiten erweitert.
- README um Architektur-, Deployment-, Security- und OAuth-Setup-Dokumentation erweitert.

### Release Notes
- DE: Eingaben und Modell-Ausgaben werden jetzt vor/nach OpenAI-Aufrufen mit `omni-moderation-latest` moderiert. Bei Flag wird der Flow deterministisch blockiert, mit sicherer DE/EN-Meldung im UI und Logging ohne PII.
- EN: Input and model output are now moderated before/after OpenAI calls using `omni-moderation-latest`. If flagged, the flow is deterministically blocked with a safe DE/EN UI message and PII-free logging.
- Personalisierung: Kindname, Elternname(n) und Kindesalter sind jetzt in der Sidebar einstellbar und werden konsistent in generierten Inhalten/Exporten verwendet.
- Alle sichtbaren UI-Texte in `app.py` wurden auf reine deutsche Formulierungen umgestellt; englische Doppelbeschriftungen wurden entfernt.
- Stabilere Criteria-State-F√ºhrung in der UI: Sidebar und Wetter-&-Events-Form nutzen jetzt ein gemeinsames, einheitlich gemapptes Zustandsmodell ohne sp√§tes √úberschreiben gebundener Widget-Keys.
- Wetter-&-Events-Recherche ist wieder lauff√§hig, weil der Importvertrag jetzt eindeutig auf dem `src`-Paket basiert.
- Activity-Suche verwendet einen konsistenten Modellvertrag inkl. `max_suggestions` und stabilen LLM-Prompt-Parametern.
- Landing-Page integriert jetzt die neue `src`-Architektur inklusive Exporte (JSON/Markdown/ICS) und optionaler Daily-Automation.
- Export- und Vorschau-Elemente sind kontrastoptimiert und damit in hellen/dunklen Zust√§nden besser zug√§nglich.
- App-Texte adressieren jetzt durchgehend Miri und Carla statt allgemein Familien.
- Landingpage ist jetzt deutlich √ºbersichtlicher und f√ºhrt Nutzer:innen mit weniger Ablenkung schneller zur Abenteuerauswahl.
- OAuth2-Setup f√ºr Kalender + Gmail ist nun vorbereitet (Consent-Screen-Konfiguration, Desktop-Client-Datei in `secrets/`, lokale Token-Erzeugung).
- Daily- und manuelle Mailflows verwenden dieselbe sichere Credential-Verwaltung.
- Das Projekt unterst√ºtzt jetzt automatisierte t√§gliche Abenteuer-Mails als SaaS-nahe Basis.
- F√ºr Production wird ein HTTPS-Reverse-Proxy (z. B. Nginx + Let's Encrypt) empfohlen.
- Wetter-Standort kann jetzt per `WEATHER_LAT`/`WEATHER_LON` gesetzt werden; die Abenteuerauswahl priorisiert bei Mehrfachtreffern den Volksgarten.
- Neue Wetter-&-Events-Sektion liefert zus√§tzliche, quellenbasierte Event-Vorschl√§ge mit klaren Status- und Fehlerhinweisen direkt im Main-Flow.
